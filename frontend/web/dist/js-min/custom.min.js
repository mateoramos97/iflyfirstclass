jQuery(document).ready(function(e){var t=!1;e(document.body).hasClass("flight-request-max")&&(isFlightRequestMax=!0),e(document.body).hasClass("front-page")&&(t=!0);var i=function(){e(".datepicker").datepicker({minDate:0,dateFormat:"d M, y"})};i(),e(function(){var t=e(".tab-round-trip .component-arrdate"),i=function(e){t.datepicker("getDate")<e&&t.val(""),t.removeClass("hasDatepicker").datepicker({minDate:e,dateFormat:"d M, y"})};e(".tab-round-trip .component-depdate").removeClass("hasDatepicker").datepicker({minDate:0,dateFormat:"d M, y",onSelect:function(t){var a=e(this).attr("data-date");e('[data-date="'+a+'"]:not(.date-multi-city)').datepicker("setDate",t),i(e(this).datepicker("getDate"))}})}),e(function(){var t=e(window),i=e("#header-wrapper"),a=i.find(".main-nav"),n=i.find(".menu-sub-wrapper");menues=i.find(".menu"),menuSub=i.find(".menu-sub"),menues.each(function(){e(this).click(function(){var t=e(this).data("menu");e(this).hasClass("active")?(menues.removeClass("active"),menuSub.removeClass("active")):(menues.removeClass("active"),e(this).addClass("active"),menuSub.removeClass("active"),menuSub.filter("[data-menu='"+t+"']").addClass("active"))})});var d=function(){t.scrollTop()>36?(a.addClass("fixed"),n.addClass("fixed")):(a.removeClass("fixed"),n.removeClass("fixed"))};t.scroll(function(){d()})}),e(function(){var t=e(".header-mobile-wrapper"),i=t.find(".open-menu"),a=t.find(".close-menu"),n=t.find(".left-menu"),d=n.find(".left-menu-inner");i.click(function(){n.addClass("open")}),a.click(function(){n.addClass("closing")}),n.click(function(t){!e(t.target).closest(d).length&&n.hasClass("open")&&n.addClass("closing")}),d.on("webkitTransitionEnd otransitionend msTransitionEnd transitionend",function(){n.hasClass("closing")&&n.removeClass("closing").removeClass("open")})}),e(function(){var t=e(".form-flight-request"),a=t.find(".tab-menu").find("li a"),n=t.find(".form-request-tab"),d=t.find(".form-request-airline");a.each(function(){e(this).click(function(){var t=e(this).data("tabLiId");a.removeClass("active"),e(this).addClass("active"),n.removeClass("active"),n.filter("[data-tab-form='"+t+"']").addClass("active")})}),function(){d.each(function(){var t=e(this),i=t.find(".check-subscription"),a=t.find(".from").find("input[type=text]").first(),n=t.find(".to").find("input[type=text]").first(),d=t.find("button[type='submit']");d.click(function(){i.val("jfghfHdhsdgUjbn345Hd")}),t.submit(function(){var t=e(this),i=!1;return t.find(".required-field").each(function(){e(this).removeClass("error-field")}),t.find(".required-field").each(function(){""===e(this).val()&&(e(this).addClass("error-field"),i=!0)}),a.val().toLowerCase()===n.val().toLowerCase()&&(a.addClass("error-field"),n.addClass("error-field"),i=!0),!i&&(d.prop("disabled",!0),d.html("Searching..."),!0)})})}(),e(function(){var a=3,n=1,d=t.find(".destination-block-wrapper"),r=t.find(".add-destination"),o=t.find(".add-destination").find("a"),c=t.find("[data-destination-id='1']").clone();t.find("[data-destination-id='1']").find(".depart .form-group").removeClass("field-dep-date-multi-city").addClass("field-dep-date-multi-city-1").find(".date-multi-city").addClass("datepicker").attr("id","dep-date-multi-city-1"),i();var u=function(){return t.find(".destination-row").length},l=function(){u()>=a?r.addClass("disabled"):u()<a&&r.hasClass("disabled")&&r.removeClass("disabled")},f=function(){t.find(".destination-row").each(function(){e(this).attr("data-destination-id",e(this).index()+1).find(".depart .form-group").removeClass("field-dep-date-multi-city").addClass("field-dep-date-multi-city-"+e(this).index()+1).find(".date-multi-city").attr("id","dep-date-multi-city-"+e(this).index()+1)})};!function(){o.click(function(){var t=c.clone();if((n=u())<a){t.attr("data-destination-id",n+1).appendTo(d).find(".depart .form-group").removeClass("field-dep-date-multi-city").addClass("field-dep-date-multi-city-"+n+1).find(".date-multi-city").addClass("datepicker").attr("id","dep-date-multi-city-"+n+1);var i=e(".field-dep-date-multi-city-"+n+1);i.find(".date-multi-city").remove(),i.append(e("<input/>",{name:"FlightRequestMax[dep_date][]",type:"text",id:"dep-date-multi-city-"+n+1,class:"date-multi-city border-radius-right datepicker required-field",placeholder:"Depart",readonly:"readonly"}).datepicker({minDate:0,dateFormat:"d M, y"})),m(),l(),s()}return!1})}();var m=function(){t.find(".destination-row").each(function(){var t=e(this);t.find(".remove-flight").click(function(){t.remove(),n=u(),f(),l()})})};m()});var s=function(){function i(e,t){return e.popularity<t.popularity?1:e.popularity>t.popularity?-1:0}function a(e,t){for(var i=e.concat(),a=0;a<i.length;++a)if(void 0!==i[a][t])for(var n=a+1;n<i.length;++n)void 0!==i[n][t]&&i[a][t]===i[n][t]&&i.splice(n--,1);return i}var d=function(){n.each(function(){var t=e(this),i=t.find(".field-from"),a=t.find(".field-to"),n=t.find(".form-request-notify");void 0!==i.val()&&void 0!==a.val()&&(-1!==i.val().indexOf(" US,")&&-1!==a.val().indexOf(" US,")?n.addClass("open"):n.removeClass("open"))})};t.find(".autocomplete").autocomplete({source:function(t,n){e.ajax({url:document.location.origin+"/request/search-airport",dataType:"json",type:"POST",data:{keyword:t.term},success:function(t){const d=t.response,s=d.cities_by_airports,r=d.cities,o=d.airports,c=d.airports_by_cities,u=a(r.concat(s),"city_code").sort(i),l=a(o.concat(c),"icao_code").sort(i);n(e.map(l,function(e){const t=e.city_code;var i="("+(e.iata_code||e.icao_code)+") ";const a=u.find(function(e){return e.city_code==t});return a&&(i+=a.name+", "),i+=e.country_code+", "+e.name,{value:i}}))}})},select:function(e,t){setTimeout(d)},minLength:3})};s()}),e(function(){var t=e(".form-tracker"),i=function(){t.find(".airport-autocomplete").autocomplete({source:function(t,i){e.ajax({url:document.location.origin+"/request/search-airport",dataType:"json",type:"POST",data:{keyword:t.term},success:function(t){i(e.map(e.parseJSON(t),function(e){return{value:e.label}}))}})},minLength:3})};(function(){t.find(".airline-autocomplete").autocomplete({source:function(t,i){e.ajax({url:document.location.origin+"/request/search-airline",dataType:"json",type:"POST",data:{keyword:t.term},success:function(t){i(e.map(e.parseJSON(t),function(e){return{value:e.label}}))}})},minLength:3})})(),i()}),e(function(){e(".request-subscriber").each(function(){var t=e(this),i=t.find(".check-subscription-request-subscriber");t.find("button[type='submit']").click(function(){i.val("f546jfghfHdhsdgUjbn345Hdssa3dsfdsf")}),t.submit(function(){var t=e(this);resultBlock=t.find(".result"),t.find("input").each(function(){e(this).removeClass("error")});var i=!1;return t.find(".required").each(function(){""==e(this).val()&&(e(this).addClass("error"),i=!0)}),i||e.ajax({url:"/request/subscriber",type:"post",dataType:"JSON",data:t.serialize(),beforeSend:function(){resultBlock.hide(),resultBlock.removeClass("success"),resultBlock.removeClass("error")},success:function(e){"success"===e.status?(resultBlock.addClass("success"),resultBlock.text(e.message),resultBlock.fadeIn()):(resultBlock.addClass("error"),resultBlock.text(e.message),resultBlock.fadeIn())}}),!1})})}),e(function(){var t=e(".support-chat-button"),i=e(".message-support-wrapper"),a=i.find(".close"),n=i.find(".form-block form");t.click(function(){i.show()}),a.click(function(){i.hide()}),n.each(function(){var t=e(this),i=t.find(".check-subscription");t.find("button[type='submit']").click(function(){i.val("jfghfHdhsdgUjbn345Hddf0")})})}),t&&e(function(){var t=e(".guarantee"),i=e(".guaranteed-block-wrapper"),a=i.find(".texture"),n=!1;t.click(function(){i.show(),n=!0}),a.click(function(){i.hide(),n=!1}),e(this).keydown(function(e){27===e.which&&!0===n&&i.hide(),n=!1})})});